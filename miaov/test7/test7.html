<!DOCTYPE html>
<html>
	<head>
		<meta charset = "utf-8">
		<title>TEST 7</title>
		
		<style>
			body, h2, ul, li {
				padding: 0;
				margin: 0;
			} 
			#body {
				width: 720px;
				height: 580px;
				margin: 50px 0 0 50px;
				background-color: #846339;
			}
			h2 {
				font-family: "microsoft Yahei";
				color: white;
				margin-left: 20px;
			}
			a {
				text-decoration: none;
			}
			a:hover {
				text-decoration: none;
			} 
			#box {
				margin-left: 20px;
				width: 686px;
				height: 460px;
				background-color: #ccc;
				position: relative;
			}
			#pre, #next {
				width: 54px;
				height: 54px;
				background-color: #f6ba25;
				line-height: 54px;
				text-align: center;
				position:absolute;
				top: 50%;
				margin-top: -27px;
				opacity: 0.3;
			}
			#pre {
				left: 50px;
			}
			#next {
				right: 50px;
			}
			#box a {
				color: white;
				font-size: 28px;
				font-weight: bold;
			}
			#lis {
				/*height: 18px;*/
				width: 140px;
				margin: 30px auto 30px;
			}
			li {
				float: left;
				list-style: none;
				padding-left: 10px;
				position: relative;
			}
			li div {
				position: absolute;
				top: -90px;
				left: -44px;
				width: 120px;
				height: 86px;
				background: url(images/liDiv.png) no-repeat;
				text-align: center;
				padding-top:5px;
				display:none;
			}
		</style>

		<script>
			window.onload = function() {
				var oPre = document.getElementById("pre");
				var oNext = document.getElementById("next");
				var oUl = document.getElementById("lis");
				var oLi = oUl.getElementsByTagName("li");
				var oImg = document.getElementById('img');
				var liImg = [];
				var divImg = [];
				var liDiv = [];
				oImg.index = 0;

				//存储图片地址
				var arrImg = ["images/1.png", "images/2.png", "images/3.png", "images/4.png", "images/5.png"];
				var arrBg = ["images/bg1.png", "images/bg2.png", "images/bg3.png", "images/bg4.png", "images/bg5.png"];

				//获取list中的img
				for (var i = 0; i< oLi.length; i++) {
					var aDiv = oLi[i].getElementsByTagName("div");
					var aImg = oLi[i].getElementsByTagName("img");
					for (var j = 0; j < aImg.length; j++) {
						if (j == 0) {
							liImg.push(aImg[j]);
						} else {
							divImg.push(aImg[j]);
						}
					}

					for (var k = 0; k < aDiv.length; k++) {
						liDiv.push(aDiv[k]);
					}
				}

				//设置list中图标随图片的改变
				function fnList() {
					for (var i = 0; i < oLi.length; i++) {
						if (oImg.index !== i) {
							liImg[i].src = "images/list1.png";
						} 
					}
					liImg[oImg.index].src = "images/list2.png" 
				}
				fnList();

				//下一张 按钮设置
				oPre.onmouseover = function() {
					oPre.style.opacity = "0.7";
				}
				oPre.onmouseout = function() {
					oPre.style.opacity = "0.3";
				}
				oPre.onclick = function() {
					if (oImg.index > 0) {
						oImg.index--;
						oImg.src = arrImg[oImg.index];
					}
					fnList();
				}

				//上一张 按钮设置
				oNext.onmouseover = function() {
					oNext.style.opacity = "0.7";
				}
				oNext.onmouseout = function() {
					oNext.style.opacity = "0.3";
				}
				oNext.onclick = function() {
					if (oImg.index < arrImg.length - 1) {
						oImg.index++;
						oImg.src = arrImg[oImg.index];
					}
					fnList();
				}

				//list 按钮点击图片切换
				for (var i = 0; i < oLi.length; i++ ) {
					oLi[i].index = i;
					oLi[i].onclick = function() {
						oImg.index = this.index;
						oImg.src = arrImg[oImg.index];
						fnList();
					};
				}

				//list 按钮缩略图显示
				for (var i = 0; i < oLi.length; i++ ) {
					oLi[i].index = i;
					oLi[i].onmouseover = function() {
						liDiv[this.index].style.display = "block";
						divImg[this.index].src = arrBg[this.index];
					};
					oLi[i].onmouseout = function() {
						liDiv[this.index].style.display = "none";
					}
				}
				

			};
		</script>
	</head>

	<body>
		<div id = "body">
			<h2>带缩略图的图片轮换</h2>
			<div id = "box">
				<img id = "img" src = "images/1.png">
				<div id = "pre"><a href = "#"><</a></div>
				<div id = "next"><a href = "#">></a></div>
			</div>
			<ul id = "lis">
				<li>
					<a href = "#"><img src = "images/list1.png"></a>
					<div><img src = ""></div>
				</li>
				<li>
					<a href = "#"><img src = "images/list1.png"></a>
					<div><img src = ""></div>
				</li>
				<li>
					<a href = "#"><img src = "images/list1.png"></a>
					<div><img src = ""></div>
				</li>
				<li>
					<a href = "#"><img src = "images/list1.png"></a>
					<div><img src = ""></div>
				</li>
				<li>
					<a href = "#"><img src = "images/list1.png"></a>
					<div><img src = ""></div>
				</li>
			</ul>
		</div>
	</body>
</html>